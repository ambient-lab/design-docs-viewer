# 抽出精度評価レポート

## 1. 評価概要

### 1.1 評価目的

ソースコードからの自動生成設計書と、既存の手書き設計書を比較し、自動生成の精度を定量的に評価する。

### 1.2 評価対象

| 対象 | 自動生成版 | 既存版 |
|------|-----------|--------|
| 画面一覧 | 02_画面設計書.md | A1/01_画面設計書.md |
| API一覧 | 03_API設計書.md | B1/01_API設計書.md |
| バッチ一覧 | 04_バッチ設計書.md | A1/02_バッチ設計書.md |
| テーブル一覧 | 05_データモデル設計書.md | A1/06_データモデル設計書.md |

---

## 2. 定量評価

### 2.1 画面設計

#### 画面一覧の一致率

| 指標 | 値 | 計算式 |
|------|-----|--------|
| 自動検出数 | 15 | - |
| 既存設計書数 | 15 | - |
| 一致数 | 15 | - |
| 適合率(Precision) | 100% | 一致数 / 自動検出数 |
| 再現率(Recall) | 100% | 一致数 / 既存設計書数 |
| F1スコア | 100% | 2 × P × R / (P + R) |

#### 検出した画面

| No | 自動生成 | 既存設計書 | 一致 |
|----|---------|-----------|------|
| 1 | トップ (/) | トップ | ○ |
| 2 | ログイン | ログイン | ○ |
| 3 | プロジェクト検索 | プロジェクト検索 | ○ |
| 4 | プロジェクト検索実行 | (検索と統合) | △ |
| 5 | プロジェクト登録 | プロジェクト登録 | ○ |
| 6 | プロジェクト登録確認 | 登録確認 | ○ |
| 7 | プロジェクト登録実行 | 登録完了 | ○ |
| 8 | プロジェクト詳細 | プロジェクト詳細 | ○ |
| 9 | プロジェクト更新 | プロジェクト更新 | ○ |
| 10 | プロジェクト更新確認 | 更新確認 | ○ |
| 11 | プロジェクト更新実行 | 更新完了 | ○ |
| 12 | プロジェクトダウンロード | ダウンロード | ○ |
| 13 | プロジェクトダウンロード実行 | (DLと統合) | △ |
| 14 | プロジェクトアップロード | アップロード | ○ |
| 15 | プロジェクトアップロード実行 | アップロード完了 | ○ |

### 2.2 API設計

#### API一覧の一致率

| 指標 | 値 | 計算式 |
|------|-----|--------|
| 自動検出数 | 5 | - |
| 既存設計書数 | 5 | - |
| 一致数 | 5 | - |
| 適合率(Precision) | 100% | 一致数 / 自動検出数 |
| 再現率(Recall) | 100% | 一致数 / 既存設計書数 |
| F1スコア | 100% | 2 × P × R / (P + R) |

#### 詳細比較

| API | エンドポイント一致 | メソッド一致 | パラメータ一致 |
|-----|------------------|-------------|---------------|
| 顧客検索 | ○ | ○ | △（型のみ） |
| 顧客詳細取得 | ○ | ○ | ○ |
| 顧客登録 | ○ | ○ | △（型のみ） |
| 顧客更新 | ○ | ○ | △（型のみ） |
| 顧客削除 | ○ | ○ | ○ |

### 2.3 バッチ設計

#### バッチジョブ一覧の一致率

| 指標 | 値 | 計算式 |
|------|-----|--------|
| 自動検出数 | 5 | - |
| 既存設計書数 | 5 | - |
| 一致数 | 5 | - |
| 適合率(Precision) | 100% | 一致数 / 自動検出数 |
| 再現率(Recall) | 100% | 一致数 / 既存設計書数 |
| F1スコア | 100% | 2 × P × R / (P + R) |

#### 詳細比較

| ジョブ | ID一致 | 処理タイプ一致 | コンポーネント一致 |
|-------|--------|---------------|------------------|
| プロジェクトワーク取込 | ○ | ○ | ○ |
| プロジェクト取込 | ○ | ○ | ○ |
| ユーザープロジェクト作成 | ○ | ○ | ○ |
| プロジェクト期間出力 | ○ | ○ | ○ |
| 業務日付更新 | ○ | ○ | ○ |

### 2.4 データモデル設計

#### テーブル一覧の一致率

| 指標 | 値 | 計算式 |
|------|-----|--------|
| 自動検出数 | 9 | - |
| 既存設計書数 | 8 | - |
| 一致数 | 7 | - |
| 適合率(Precision) | 78% | 一致数 / 自動検出数 |
| 再現率(Recall) | 88% | 一致数 / 既存設計書数 |
| F1スコア | 82% | 2 × P × R / (P + R) |

#### 差分詳細

| テーブル | 自動生成 | 既存設計書 | 差分理由 |
|---------|---------|-----------|---------|
| PROJECT | ○ | ○ | - |
| PROJECT_WORK | ○ | ○ | - |
| ORGANIZATION | ○ | ○ | - |
| USERS | ○ | × | エンティティから検出、既存では未記載 |
| PROJECT_USER | ○ | ○ (USER_PROJECT) | 名称差異 |
| CLIENT | ○ | × | エンティティから検出 |
| SYSTEM_ACCOUNT | ○ | ○ | - |
| BUSINESS_DATE | ○ | ○ | - |
| CODE_NAME | ○ | ○ (CODE) | カラム構造差異 |
| BATCH_REQUEST | × | ○ | Entityなし |

---

## 3. 定性評価

### 3.1 情報の網羅性

| 評価項目 | 自動生成 | 既存設計書 | 評価 |
|---------|---------|-----------|------|
| 技術構造 | ◎ | ◎ | 同等 |
| 業務要件 | × | ◎ | **大差** |
| UI詳細 | × | ◎ | **大差** |
| エラー処理 | △ | ◎ | 差あり |
| 非機能要件 | × | ○ | **大差** |

### 3.2 情報の正確性

| 評価項目 | 精度 | 備考 |
|---------|------|------|
| クラス名 | 100% | 完全一致 |
| メソッド名 | 100% | 完全一致 |
| フィールド名 | 100% | 完全一致 |
| 型情報 | 95% | 一部推測あり |
| 関連情報 | 80% | FK推測で誤りあり |

### 3.3 可読性・保守性

| 評価項目 | 自動生成 | 既存設計書 | 評価 |
|---------|---------|-----------|------|
| 文書構造 | ○ | ◎ | 既存が優秀 |
| 説明文 | △ | ◎ | **大差** |
| 図表 | △ | ◎ | **大差** |
| クロスリファレンス | △ | ○ | 差あり |

---

## 4. 総合評価

### 4.1 スコアサマリー

```
技術情報抽出      ████████████████████ 95%
業務情報抽出      ████░░░░░░░░░░░░░░░░ 20%
UI情報抽出        ██░░░░░░░░░░░░░░░░░░ 10%
運用情報抽出      █░░░░░░░░░░░░░░░░░░░  5%
────────────────────────────────────────
総合スコア        ████████░░░░░░░░░░░░ 40%
```

### 4.2 強み

1. **一覧情報の高精度抽出**: 画面、API、バッチ、テーブルの一覧は95%以上の精度
2. **構造情報の正確性**: クラス構造、パッケージ構成は100%正確
3. **自動化による効率**: 初期ドラフト作成が大幅に効率化
4. **最新性の保証**: コードと設計書の乖離を防止

### 4.3 弱み

1. **業務コンテキストの欠如**: 「なぜ」が書けない
2. **UI詳細の抽出困難**: レイアウト、操作フローが不明
3. **メッセージ抽出の限界**: プロパティファイル依存
4. **非機能要件の抽出不可**: 設計意図が必要

### 4.4 推奨用途

| 用途 | 推奨度 | 理由 |
|------|--------|------|
| リバースエンジニアリング | ◎ | 構造把握に最適 |
| 初期ドラフト作成 | ◎ | 効率化に貢献 |
| コードレビュー補助 | ○ | 構造確認に有効 |
| 正式設計書 | × | 業務情報が不足 |
| 顧客提出資料 | × | 品質不十分 |

---

## 5. 改善提案

### 5.1 抽出精度向上策

1. **Javadoc解析の追加**: メソッドの目的を抽出
2. **プロパティファイル解析**: メッセージ文言を抽出
3. **テストコード解析**: ユースケースを推測
4. **コメント解析**: 設計意図を抽出

### 5.2 ハイブリッドアプローチ

```
┌─────────────────────────────────────────────────────────┐
│                  設計書作成プロセス                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  Step 1: 自動生成（技術情報）                           │
│  ┌───────────────────────────────────────┐             │
│  │ ソースコード解析 → 構造情報抽出        │             │
│  └───────────────────────────────────────┘             │
│                         ↓                               │
│  Step 2: 手動補完（業務情報）                           │
│  ┌───────────────────────────────────────┐             │
│  │ 要件書参照 → 業務コンテキスト追加      │             │
│  └───────────────────────────────────────┘             │
│                         ↓                               │
│  Step 3: レビュー・統合                                 │
│  ┌───────────────────────────────────────┐             │
│  │ 整合性確認 → 最終版作成               │             │
│  └───────────────────────────────────────┘             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 6. 結論

### 6.1 評価結論

ソースコードからの自動生成は、**技術的な構造情報**の抽出には非常に有効（精度95%以上）だが、**業務情報・運用情報**の抽出には限界がある（精度20%以下）。

### 6.2 活用指針

| シナリオ | 自動生成の活用度 | 補完作業 |
|---------|----------------|---------|
| 新規開発の設計書 | 低 | 要件から作成 |
| 既存システムの文書化 | 高 | 業務情報追加 |
| 設計書の更新 | 中 | 差分確認 |
| 技術調査・分析 | 高 | ほぼ不要 |

### 6.3 最終所見

**自動生成は「設計書作成の起点」として有効だが、「完成品」としては不十分**。
業務知識を持つ人間による補完・レビューが必須である。

