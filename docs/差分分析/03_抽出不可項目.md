# ソースコードから抽出不可能な項目

## 1. 概要

本ドキュメントでは、ソースコードの静的解析では抽出が困難または不可能な設計情報を整理します。
これらの情報は、要件定義書、外部設計書、または関係者へのヒアリングにより補完する必要があります。

---

## 2. 抽出不可能な項目一覧

### 2.1 業務要件・ユースケース

| 項目 | 理由 | 補完方法 |
|------|------|---------|
| システム目的 | コードに「なぜ」は書かれない | 要件定義書 |
| ユースケース | 業務フローは実装に埋もれる | 業務フロー図 |
| アクター定義 | ユーザー種別の意図不明 | ユーザー要件 |
| 業務ルール | ビジネスロジックの背景不明 | 業務要件書 |
| 用語定義 | ドメイン知識が必要 | 用語集 |

**例: 既存設計書にあって自動生成にない情報**

```markdown
## システム目的（既存設計書）
本システムは、プロジェクト情報を一元管理し、
経営層への迅速な報告と意思決定支援を目的とする。

## システム目的（自動生成）
→ 抽出不可
```

### 2.2 画面UI詳細

| 項目 | 理由 | 補完方法 |
|------|------|---------|
| 画面レイアウト | HTMLはロジックを持たない | ワイヤーフレーム |
| 項目配置 | CSSからの再構成困難 | UI設計書 |
| 表示/非表示条件 | JSロジックの解析困難 | 画面仕様書 |
| 操作説明 | ユーザー向け文言なし | 操作マニュアル |
| ヘルプ文言 | プロパティファイル依存 | メッセージ定義 |

**例: 画面レイアウト**

```markdown
## 画面レイアウト（既存設計書）
┌────────────────────────────────────┐
│ プロジェクト検索                      │
├────────────────────────────────────┤
│ 事業部  [▼選択]  部門  [▼選択]      │
│ プロジェクト名  [          ]        │
│ 種別 □開発 □保守  分類 □A □B □C   │
│ 売上高  [    ] ～ [    ] 万円      │
│ 開始日  [    ] ～ [    ]          │
│                    [検索] [クリア]  │
└────────────────────────────────────┘

## 画面レイアウト（自動生成）
→ 抽出不可（フォーム項目一覧のみ）
```

### 2.3 メッセージ・文言

| 項目 | 理由 | 補完方法 |
|------|------|---------|
| エラーメッセージ | propertiesファイル外部化 | メッセージ定義書 |
| 確認メッセージ | 同上 | 同上 |
| ラベル文言 | Thymeleafテンプレート | 画面仕様書 |
| ガイダンス | 同上 | 同上 |

**例: エラーメッセージ**

```markdown
## エラーメッセージ（既存設計書）
| コード | メッセージ |
|--------|-----------|
| E0001 | プロジェクト名は必須です |
| E0002 | 開始日は終了日以前を指定してください |
| E0003 | 指定されたプロジェクトは存在しません |

## エラーメッセージ（自動生成）
→ 抽出不可（バリデーションルールのみ）
```

### 2.4 非機能要件

| 項目 | 理由 | 補完方法 |
|------|------|---------|
| 性能要件 | コードに要件値なし | 非機能要件書 |
| 可用性要件 | インフラ設計に依存 | インフラ設計書 |
| セキュリティ要件 | 設計意図が不明 | セキュリティ設計書 |
| 同時接続数 | 設定値は運用依存 | 運用設計書 |
| データ量見積 | 業務要件に依存 | 容量設計書 |

**例: 性能要件**

```markdown
## 性能要件（既存設計書）
| 機能 | 目標レスポンス | 備考 |
|------|--------------|------|
| 検索 | 3秒以内 | 1000件以下 |
| 登録 | 2秒以内 | |
| 一括登録 | 5分以内 | 1万件まで |

## 性能要件（自動生成）
→ 抽出不可
```

### 2.5 運用・保守情報

| 項目 | 理由 | 補完方法 |
|------|------|---------|
| バッチスケジュール | 外部スケジューラ管理 | 運用設計書 |
| 監視項目 | 運用ツール依存 | 監視設計書 |
| バックアップ方針 | インフラ設計に依存 | インフラ設計書 |
| 障害対応手順 | 運用知見が必要 | 運用マニュアル |
| ログ出力仕様 | 設定ファイル依存 | ログ設計書 |

**例: バッチスケジュール**

```markdown
## バッチスケジュール（既存設計書）
| ジョブID | 実行タイミング | 備考 |
|---------|--------------|------|
| BA1060201 | 毎日 02:00 | 前日データ取込 |
| BA1070101 | 毎日 00:00 | 日次更新 |

## バッチスケジュール（自動生成）
→ 抽出不可（ジョブ定義のみ）
```

### 2.6 外部連携詳細

| 項目 | 理由 | 補完方法 |
|------|------|---------|
| 連携先システム | 設定ファイル外部化 | IF設計書 |
| 通信プロトコル | 環境依存 | IF設計書 |
| 認証方式詳細 | セキュリティ設計に依存 | 認証設計書 |
| タイムアウト値 | 設定ファイル依存 | 非機能要件書 |
| リトライ仕様 | 設計意図が必要 | IF設計書 |

---

## 3. 抽出困難な理由の分類

### 3.1 情報の外部化

コードから分離されている情報:

```
設定ファイル
├── application.yml      → DB接続情報、ポート番号
├── messages.properties  → エラーメッセージ
├── logback.xml         → ログ設定
└── security.xml        → 認証設定
```

### 3.2 暗黙知

コードに明示されていない情報:

- なぜこの設計にしたのか
- 将来の拡張予定
- トレードオフの判断理由
- 過去の障害対応履歴

### 3.3 運用依存

実行環境でしか決まらない情報:

- 実行時間帯
- データ量
- 同時接続数
- 外部システムの可用性

---

## 4. 補完方法と優先度

### 4.1 補完情報の優先度

| 優先度 | 項目 | 理由 |
|--------|------|------|
| 高 | ユースケース | システム理解の基盤 |
| 高 | 画面レイアウト | ユーザー影響大 |
| 高 | エラーメッセージ | 品質に直結 |
| 中 | 非機能要件 | 運用影響 |
| 中 | バッチスケジュール | 運用に必要 |
| 低 | 用語定義 | 参照用 |

### 4.2 情報収集方法

| 方法 | 対象情報 | 工数 |
|------|---------|------|
| 既存ドキュメント参照 | 要件、設計意図 | 低 |
| 設定ファイル解析 | メッセージ、設定値 | 低 |
| 関係者ヒアリング | 暗黙知、運用知見 | 中 |
| ログ解析 | 実行実績、障害履歴 | 中 |
| 動的解析 | 実行フロー | 高 |

---

## 5. 既存設計書との比較詳細

### 5.1 A1_プロジェクト管理システム/01_画面設計書

**既存設計書にのみ存在する情報**:

1. 画面レイアウト図
2. 項目の入力補助（カレンダー、プルダウン）
3. 初期表示値
4. 表示条件（権限による表示切替）
5. エラー表示位置
6. 確認ダイアログの文言
7. 印刷レイアウト

### 5.2 B1_顧客管理システム/01_API設計書

**既存設計書にのみ存在する情報**:

1. シーケンス図（詳細な処理フロー）
2. 認証方式の詳細（Bearer Token仕様）
3. エラーコード定義と対応
4. レート制限仕様
5. ページネーション詳細
6. キャッシュ戦略
7. API利用ガイドライン

### 5.3 A1_プロジェクト管理システム/06_データモデル設計書

**既存設計書にのみ存在する情報**:

1. 論理ERD（業務視点）
2. データ移行計画
3. 初期データ投入スクリプト
4. パーティション設計
5. アーカイブ方針
6. マスキング対象項目
7. GDPR対応方針

---

## 6. 結論と推奨事項

### 6.1 ソースコードからの自動生成の限界

```
┌─────────────────────────────────────────────────────────┐
│                    設計情報の全体像                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│   ┌─────────────────────┐  ┌─────────────────────────┐ │
│   │   抽出可能領域       │  │   抽出不可領域           │ │
│   │   (技術情報)        │  │   (業務・運用情報)       │ │
│   │                     │  │                         │ │
│   │ ・クラス構造        │  │ ・ユースケース          │ │
│   │ ・エンドポイント    │  │ ・画面レイアウト        │ │
│   │ ・データモデル      │  │ ・エラーメッセージ      │ │
│   │ ・バリデーション    │  │ ・非機能要件            │ │
│   │                     │  │ ・運用情報              │ │
│   │     約40%           │  │      約60%              │ │
│   └─────────────────────┘  └─────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 6.2 推奨される補完戦略

1. **自動生成**で技術情報の骨格を作成
2. **既存ドキュメント**から業務情報を移植
3. **ヒアリング**で暗黙知を明示化
4. **レビュー**で整合性を確認

### 6.3 継続的なメンテナンス

- コード変更時は設計書も更新
- 自動生成部分は定期的に再生成
- 手動補完部分は変更管理を徹底

