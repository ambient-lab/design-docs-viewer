# 差分サマリー

## 1. 総合評価

### 1.1 抽出率サマリー

| 設計書種別 | 抽出可能率 | 評価 |
|-----------|-----------|------|
| システム構造 | 90% | ◎ 優秀 |
| 画面一覧 | 95% | ◎ 優秀 |
| API一覧 | 95% | ◎ 優秀 |
| バッチジョブ一覧 | 90% | ◎ 優秀 |
| データモデル構造 | 85% | ○ 良好 |
| バリデーションルール | 70% | △ 部分的 |
| 画面レイアウト | 0% | × 不可 |
| 業務フロー | 10% | × 不可 |
| 非機能要件 | 5% | × 不可 |

### 1.2 総合所見

**ソースコードから高精度で抽出可能**:
- 技術的な構造情報（クラス、メソッド、テーブル）
- エンドポイントとHTTPメソッド
- バリデーションアノテーション

**ソースコードからは不十分**:
- 業務要件、ユースケース
- 画面レイアウト、UI詳細
- 非機能要件（性能、可用性）
- エラーメッセージの文言

---

## 2. 設計書別差分

### 2.1 システム概要

| 項目 | 自動生成 | 既存設計書 | 差分 |
|------|---------|-----------|------|
| モジュール構成 | ○ | ○ | 同等 |
| 技術スタック | ○ | ○ | 同等 |
| 機能一覧 | △ | ○ | 自動生成は技術寄り |
| システム目的 | × | ○ | **抽出不可** |
| ユースケース | × | ○ | **抽出不可** |
| 用語定義 | × | ○ | **抽出不可** |

### 2.2 画面設計

| 項目 | 自動生成 | 既存設計書 | 差分 |
|------|---------|-----------|------|
| 画面一覧 | ○ | ○ | 同等 |
| URL/エンドポイント | ○ | ○ | 同等 |
| フォーム項目 | ○ | ○ | ほぼ同等 |
| 画面遷移図 | △ | ○ | 自動生成は推測 |
| レイアウト | × | ○ | **抽出不可** |
| 操作説明 | × | ○ | **抽出不可** |
| エラー表示 | × | ○ | **抽出不可** |

**コントローラーから検出された画面数**: 15画面
**既存設計書の画面数**: 15画面
**一致率**: 100%

### 2.3 API設計

| 項目 | 自動生成 | 既存設計書 | 差分 |
|------|---------|-----------|------|
| エンドポイント一覧 | ○ | ○ | 同等 |
| HTTPメソッド | ○ | ○ | 同等 |
| リクエストパラメータ | △ | ○ | 型は同等、説明不足 |
| レスポンス形式 | △ | ○ | 構造は同等、例不足 |
| エラーコード | × | ○ | **抽出不可** |
| 認証方式 | × | ○ | **抽出不可** |
| シーケンス図 | × | ○ | **抽出不可** |

**自動検出API数**: 5 API
**既存設計書API数**: 5 API
**一致率**: 100%

### 2.4 バッチ設計

| 項目 | 自動生成 | 既存設計書 | 差分 |
|------|---------|-----------|------|
| ジョブ一覧 | ○ | ○ | 同等 |
| 処理タイプ | ○ | ○ | 同等 |
| コンポーネント構成 | ○ | ○ | 同等 |
| 入出力ファイル | △ | ○ | パスは不完全 |
| スキップ設定 | ○ | ○ | 同等 |
| スケジュール | × | ○ | **抽出不可** |
| 業務フロー | × | ○ | **抽出不可** |
| ジョブフロー図 | × | ○ | **抽出不可** |

**自動検出ジョブ数**: 5ジョブ
**既存設計書ジョブ数**: 5ジョブ
**一致率**: 100%

### 2.5 データモデル

| 項目 | 自動生成 | 既存設計書 | 差分 |
|------|---------|-----------|------|
| テーブル一覧 | ○ | ○ | ほぼ同等 |
| カラム定義 | ○ | ○ | 同等 |
| 主キー | ○ | ○ | 同等 |
| 外部キー | ○ | ○ | 同等 |
| インデックス | △ | ○ | 推測のみ |
| ER図 | △ | ○ | テキスト版のみ |
| データ移行 | × | ○ | **抽出不可** |
| 初期データ | × | ○ | **抽出不可** |

**自動検出テーブル数**: 9テーブル
**既存設計書テーブル数**: 8テーブル
**差分**: CLIENT, USERSは自動生成で検出、CODE_NAMEの構造差異

### 2.6 バリデーション

| 項目 | 自動生成 | 既存設計書 | 差分 |
|------|---------|-----------|------|
| 単項目チェック | ○ | ○ | 同等 |
| ドメイン定義 | △ | ○ | アノテーションから推測 |
| 相関チェック | ○ | ○ | @AssertTrueから検出 |
| エラーメッセージ | × | ○ | **抽出不可** |
| 桁数制限詳細 | △ | ○ | DomainBean未参照 |

---

## 3. 差分の原因分析

### 3.1 ソースコードから抽出可能な理由

| カテゴリ | 抽出根拠 |
|---------|---------|
| クラス構造 | パッケージ構成、継承関係 |
| アノテーション | @Controller, @Service, @Entity等 |
| メソッドシグネチャ | パラメータ型、戻り値型 |
| 設定ファイル | application.yml, pom.xml |
| Mapperファイル | SQLクエリからテーブル構造 |

### 3.2 ソースコードから抽出困難な理由

| カテゴリ | 困難な理由 |
|---------|-----------|
| 業務要件 | コードに「なぜ」は書かれない |
| UI詳細 | HTMLテンプレートにロジックなし |
| エラー文言 | プロパティファイルの解析が必要 |
| 非機能要件 | 設計意図はコードに現れない |
| 運用情報 | インフラ設定は別管理 |

---

## 4. 活用提案

### 4.1 自動生成の適用シーン

**推奨**:
- 既存システムのリバースエンジニアリング
- 設計書の初期ドラフト作成
- コードレビュー時の構造確認
- 新規参画者向けの概要把握

**非推奨**:
- 正式な設計書としての利用
- 顧客向けドキュメント
- 運用マニュアル作成

### 4.2 補完が必要な情報

自動生成設計書を完成させるには、以下の情報を別途追加する必要があります:

1. **業務要件書**から: ユースケース、業務フロー
2. **UI/UX設計書**から: 画面レイアウト、操作フロー
3. **メッセージ定義**から: エラーメッセージ、表示文言
4. **インフラ設計書**から: 環境構成、性能要件
5. **運用設計書**から: バッチスケジュール、監視項目

---

## 5. 結論

### 5.1 ソースコードのみでできること

✅ システム構造の把握
✅ 技術スタックの特定
✅ エンドポイント・API一覧の抽出
✅ データモデルの基本構造
✅ バリデーションルールの概要

### 5.2 ソースコードのみではできないこと

❌ 業務要件・目的の記述
❌ ユーザー向け操作説明
❌ 画面レイアウト・デザイン
❌ 詳細なエラーハンドリング
❌ 非機能要件（性能、可用性）
❌ 運用・保守情報

### 5.3 推奨アプローチ

```
                    ┌─────────────────┐
                    │   既存システム   │
                    └────────┬────────┘
                             │
            ┌────────────────┼────────────────┐
            ▼                ▼                ▼
    ┌───────────────┐ ┌───────────────┐ ┌───────────────┐
    │  ソースコード  │ │   仕様書      │ │  関係者知見   │
    └───────┬───────┘ └───────┬───────┘ └───────┬───────┘
            │                │                │
            ▼                ▼                ▼
    ┌───────────────┐ ┌───────────────┐ ┌───────────────┐
    │  自動生成      │ │  手動記述     │ │  インタビュー │
    │  技術情報抽出  │ │  業務情報追加 │ │  暗黙知の明示 │
    └───────┬───────┘ └───────┬───────┘ └───────┬───────┘
            │                │                │
            └────────────────┼────────────────┘
                             ▼
                    ┌─────────────────┐
                    │   完成設計書     │
                    └─────────────────┘
```

**結論**: ソースコードからの自動生成は「技術情報の抽出」には非常に有効だが、「業務・運用情報」は別途補完が必要。

