# データモデル設計書（ソースコード自動生成）

> **注記**: 本ドキュメントはソースコードの静的解析により自動生成されました。

---

## 1. テーブル一覧

| テーブル名 | 論理名 | 主キー | 検出根拠 |
|-----------|--------|--------|----------|
| PROJECT | プロジェクト | PROJECT_ID | Entity/Mapper |
| USERS | ユーザー | USER_ID | Entity/Mapper |
| PROJECT_USER | プロジェクトユーザー | PROJECT_ID, USER_ID | Entity/Mapper |
| ORGANIZATION | 組織 | ORGANIZATION_ID | Entity/Mapper |
| CLIENT | 顧客 | CLIENT_ID | Entity/Mapper |
| SYSTEM_ACCOUNT | システムアカウント | USER_ID | Entity/Mapper |
| BUSINESS_DATE | 業務日付 | SEGMENT_ID | Entity/Mapper |
| CODE_NAME | コード名称 | CODE_ID, CODE_VALUE, LANG | Entity/Mapper |
| PROJECT_WORK | プロジェクトワーク | - | Batch処理 |

---

## 2. テーブル定義

### 2.1 PROJECT（プロジェクト）

| カラム名 | 論理名 | データ型 | NULL | PK | 備考 |
|---------|--------|---------|------|-----|------|
| PROJECT_ID | プロジェクトID | INTEGER | NO | ○ | SERIAL |
| PROJECT_NAME | プロジェクト名 | VARCHAR(128) | NO | | |
| PROJECT_TYPE | プロジェクト種別 | VARCHAR(2) | NO | | コードマスタ |
| PROJECT_CLASS | プロジェクト分類 | VARCHAR(2) | NO | | コードマスタ |
| PROJECT_START_DATE | 開始日 | DATE | NO | | |
| PROJECT_END_DATE | 終了日 | DATE | NO | | |
| ORGANIZATION_ID | 組織ID | INTEGER | NO | | FK→ORGANIZATION |
| CLIENT_ID | 顧客ID | INTEGER | | | FK→CLIENT |
| PROJECT_MANAGER | PM | VARCHAR(128) | | | |
| PROJECT_LEADER | PL | VARCHAR(128) | | | |
| NOTE | 備考 | VARCHAR(512) | NO | | |
| SALES | 売上高 | INTEGER | NO | | |
| VERSION_NO | バージョン | BIGINT | | | 楽観ロック |

### 2.2 USERS（ユーザー）

| カラム名 | 論理名 | データ型 | NULL | PK | 備考 |
|---------|--------|---------|------|-----|------|
| USER_ID | ユーザーID | INTEGER | NO | ○ | SERIAL |
| KANJI_NAME | 漢字名 | VARCHAR | | | |
| KANA_NAME | カナ名 | VARCHAR | | | |
| PM_FLAG | PM権限フラグ | VARCHAR(1) | | | 0/1 |

### 2.3 PROJECT_USER（プロジェクトユーザー）

| カラム名 | 論理名 | データ型 | NULL | PK | 備考 |
|---------|--------|---------|------|-----|------|
| PROJECT_ID | プロジェクトID | INTEGER | NO | ○ | FK→PROJECT |
| USER_ID | ユーザーID | INTEGER | NO | ○ | FK→USERS |

### 2.4 ORGANIZATION（組織）

| カラム名 | 論理名 | データ型 | NULL | PK | 備考 |
|---------|--------|---------|------|-----|------|
| ORGANIZATION_ID | 組織ID | INTEGER | NO | ○ | SERIAL |
| ORGANIZATION_NAME | 組織名 | VARCHAR | NO | | |
| UPPER_ORGANIZATION | 上位組織ID | INTEGER | | | FK→ORGANIZATION（自己結合） |

### 2.5 CLIENT（顧客）

| カラム名 | 論理名 | データ型 | NULL | PK | 備考 |
|---------|--------|---------|------|-----|------|
| CLIENT_ID | 顧客ID | INTEGER | NO | ○ | |
| CLIENT_NAME | 顧客名 | VARCHAR(128) | | | |
| KANA_NAME | カナ名 | VARCHAR(128) | | | |
| INDUSTRY_CODE | 業種コード | VARCHAR | | | |

### 2.6 SYSTEM_ACCOUNT（システムアカウント）

| カラム名 | 論理名 | データ型 | NULL | PK | 備考 |
|---------|--------|---------|------|-----|------|
| USER_ID | ユーザーID | INTEGER | NO | ○ | FK→USERS |
| LOGIN_ID | ログインID | VARCHAR | NO | | UNIQUE |
| USER_PASSWORD | パスワード | VARCHAR | NO | | ハッシュ化 |
| FAILED_COUNT | 失敗回数 | INTEGER | | | |
| EFFECTIVE_DATE_FROM | 有効開始日 | DATE | | | |
| EFFECTIVE_DATE_TO | 有効終了日 | DATE | | | |
| PASSWORD_EXPIRATION_DATE | PW有効期限 | DATE | | | |

### 2.7 BUSINESS_DATE（業務日付）

| カラム名 | 論理名 | データ型 | NULL | PK | 備考 |
|---------|--------|---------|------|-----|------|
| SEGMENT_ID | セグメントID | VARCHAR(2) | NO | ○ | |
| BIZ_DATE | 業務日付 | VARCHAR(8) | NO | | YYYYMMDD |

### 2.8 CODE_NAME（コード名称）

| カラム名 | 論理名 | データ型 | NULL | PK | 備考 |
|---------|--------|---------|------|-----|------|
| CODE_ID | コードID | VARCHAR | NO | ○ | |
| CODE_VALUE | コード値 | VARCHAR | NO | ○ | |
| LANG | 言語 | VARCHAR | NO | ○ | ja/en |
| CODE_NAME | コード名称 | VARCHAR | | | |
| SHORT_NAME | 短縮名 | VARCHAR | | | |
| OPTION01 | オプション1 | VARCHAR | | | |

---

## 3. ER図（概念）

```
┌──────────────┐       ┌──────────────┐
│   PROJECT    │───────│    CLIENT    │
└──────┬───────┘       └──────────────┘
       │
       │ N:M
       │
┌──────┴───────┐
│ PROJECT_USER │
└──────┬───────┘
       │
       │
┌──────┴───────┐       ┌──────────────┐
│    USERS     │───────│SYSTEM_ACCOUNT│
└──────────────┘       └──────────────┘

┌──────────────┐
│ ORGANIZATION │──┐ 自己結合
└──────────────┘──┘

┌──────────────┐       ┌──────────────┐
│  CODE_NAME   │       │BUSINESS_DATE │
└──────────────┘       └──────────────┘
```

---

## 4. シーケンス

| シーケンス名 | 対象テーブル |
|-------------|-------------|
| PROJECT_ID_SEQ | PROJECT |
| USER_ID_SEQ | USERS |
| ORGANIZATION_ID_SEQ | ORGANIZATION |

---

## 5. コードマスタ

### 5.1 PROJECT_TYPE（プロジェクト種別）

| コード | 名称 |
|--------|------|
| (値不明) | 開発 |
| (値不明) | 保守 |

### 5.2 PROJECT_CLASS（プロジェクト分類）

| コード | 名称 |
|--------|------|
| (値不明) | SS |
| (値不明) | S |
| (値不明) | A |
| (値不明) | B |
| (値不明) | C |

---

## 6. 外部キー制約

| テーブル | カラム | 参照先 |
|---------|--------|--------|
| PROJECT | ORGANIZATION_ID | ORGANIZATION.ORGANIZATION_ID |
| PROJECT | CLIENT_ID | CLIENT.CLIENT_ID |
| PROJECT_USER | PROJECT_ID | PROJECT.PROJECT_ID |
| PROJECT_USER | USER_ID | USERS.USER_ID |
| SYSTEM_ACCOUNT | USER_ID | USERS.USER_ID |
| ORGANIZATION | UPPER_ORGANIZATION | ORGANIZATION.ORGANIZATION_ID |

---

## 7. インデックス（推測）

| テーブル | インデックス | 対象カラム |
|---------|-------------|-----------|
| PROJECT | PK | PROJECT_ID |
| PROJECT | (検索用) | PROJECT_NAME, PROJECT_TYPE |
| USERS | PK | USER_ID |
| ORGANIZATION | PK | ORGANIZATION_ID |
| CLIENT | PK | CLIENT_ID |
| SYSTEM_ACCOUNT | UK | LOGIN_ID |
