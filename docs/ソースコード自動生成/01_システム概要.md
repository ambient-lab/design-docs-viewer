# システム概要（ソースコード自動生成）

> **注記**: 本ドキュメントはソースコードの静的解析により自動生成されました。

---

## 1. プロジェクト構造

### 1.1 モジュール構成

```
spring-sample-project/
├── parent/          # 親POM（依存関係管理）
├── common/          # 共通モジュール
│   ├── ドメインバリデーション
│   ├── 例外処理
│   ├── MyBatis生成モデル
│   └── Nablarch連携
├── web/             # Webアプリケーション（MVC）
│   ├── コントローラー
│   ├── フォーム
│   ├── サービス
│   └── マッパー
├── api/             # REST API
│   ├── RESTコントローラー
│   ├── リクエスト/レスポンス
│   ├── サービス
│   └── マッパー
└── batch/           # バッチ処理
    ├── ジョブ設定
    ├── ステップ定義
    └── タスクレット
```

### 1.2 モジュール依存関係

| モジュール | 依存先 | 役割 |
|-----------|--------|------|
| common | - | 共通機能、ドメイン定義 |
| web | common | Web画面アプリケーション |
| api | common | REST APIサービス |
| batch | common | バッチ処理 |

---

## 2. 技術スタック

### 2.1 フレームワーク・ライブラリ

| カテゴリ | 技術 | 検出根拠 |
|---------|------|----------|
| フレームワーク | Spring Boot | pom.xml, @SpringBootApplication |
| Web | Spring MVC | @Controller, @RequestMapping |
| テンプレート | Thymeleaf | .html ファイル |
| ORM | MyBatis | Mapper インターフェース |
| バリデーション | Jakarta Validation + Nablarch | @Domain, @Required |
| バッチ | Spring Batch | @EnableBatchProcessing |
| セキュリティ | Spring Security | WebSecurityConfig |
| DB | PostgreSQL | compose.yml |

### 2.2 ビルドツール

- **Maven**: pom.xml によるプロジェクト管理
- **Java**: バージョン不明（pom.xml から確認可能）

---

## 3. サブシステム一覧

### 3.1 A1: プロジェクト管理システム（Web）

| 機能ID | 機能名 | 検出クラス |
|--------|--------|-----------|
| A1-01 | プロジェクト検索 | ProjectSearchController |
| A1-02 | プロジェクト登録 | ProjectCreateController |
| A1-03 | プロジェクト詳細 | ProjectDetailController |
| A1-04 | プロジェクト更新 | ProjectUpdateController |
| A1-05 | プロジェクトダウンロード | ProjectDownloadController |
| A1-06 | プロジェクトアップロード | ProjectUploadController |
| A1-07 | ログイン | SecurityLoginController |

### 3.2 B1: 顧客管理システム（API）

| 機能ID | 機能名 | 検出クラス |
|--------|--------|-----------|
| B1-01 | 顧客検索 | ClientSearchController |
| B1-02 | 顧客詳細 | ClientDetailController |
| B1-03 | 顧客登録 | ClientCreateController |
| B1-04 | 顧客更新 | ClientUpdateController |
| B1-05 | 顧客削除 | ClientDeleteController |

### 3.3 バッチジョブ

| ジョブID | ジョブ名 | 検出クラス |
|---------|---------|-----------|
| BA1060201 | プロジェクトワーク取込 | ImportProjectsToWorkConfig |
| BA1060202 | プロジェクト取込 | ImportProjectsConfig |
| BA1050101 | ユーザープロジェクト作成 | CreateUsersProjectsConfig |
| BA1060301 | プロジェクト期間出力 | ExportProjectsInPeriodConfig |
| BA1070101 | 業務日付更新 | UpdateBusinessDateConfig |

---

## 4. アーキテクチャパターン

### 4.1 レイヤードアーキテクチャ

```
┌─────────────────────────────────────────┐
│         プレゼンテーション層             │
│  Controller / Form / View              │
├─────────────────────────────────────────┤
│            ビジネス層                   │
│           Service                      │
├─────────────────────────────────────────┤
│         データアクセス層                │
│           Mapper (MyBatis)             │
├─────────────────────────────────────────┤
│          データベース                   │
│           PostgreSQL                   │
└─────────────────────────────────────────┘
```

### 4.2 検出されたデザインパターン

| パターン | 検出根拠 |
|---------|----------|
| MVC | @Controller + @Service + Mapper |
| DTO | Form, Request, Response クラス |
| Repository | Mapper インターフェース |
| トランザクショントークン | @TransactionTokenCheck |
| 楽観ロック | VERSION_NO フィールド |

---

## 5. 外部連携

### 5.1 データベース

- **RDBMS**: PostgreSQL
- **接続方式**: MyBatis
- **トランザクション管理**: Spring Transaction

### 5.2 ファイル入出力

| 種別 | 形式 | 検出根拠 |
|------|------|----------|
| 入力 | CSV | ProjectUploadController |
| 出力 | CSV | CsvFileDownloadView |

---

## 6. セキュリティ

### 6.1 認証・認可

| 機能 | 実装 | 検出根拠 |
|------|------|----------|
| ログイン | Spring Security | WebSecurityConfig |
| パスワード管理 | ハッシュ化 | SystemAccount エンティティ |
| 失敗カウント | アカウントロック | FAILED_COUNT フィールド |
| 有効期限 | パスワード期限 | PASSWORD_EXPIRATION_DATE |

### 6.2 CSRF対策

- トランザクショントークン: TransactionTokenConfiguration
